# Main configuration file
defaults:
  - model: mlp
  - data: cifar10
  - profiler: null  # Options: null (disabled), simple, advanced, pytorch
  - _self_
  - experiment: null

# Random seed for reproducibility
seed: 42

# Trainer configuration
trainer:
  max_epochs: 10
  accelerator: auto
  devices: 1
  precision: 32
  log_every_n_steps: 10
  check_val_every_n_epoch: 1

# Weights & Biases logging
wandb:
  project: rep-geometry-mlops
  entity: null  # Set to your W&B username/team
  save_dir: ${hydra:runtime.output_dir}  # Explicitly use Hydra output directory
  log_model: false  # Set to true to save model checkpoints to W&B
  registry:
    enabled: false
    name: model  # W&B registry name (default: "model")
    collection: null  # Registry collection name (defaults to artifact_name)
    artifact_name: null  # Defaults to "{model}-{dataset}" if not set
    artifact_type: model
    use_best: true
    include_config: true
    include_metrics: true
    link: true
    aliases: []
    metadata: {}

# Paths (use Hydra output directory for outputs)
# Note: data_dir is defined in data/*.yaml configs, not here
paths:
  output_dir: ${hydra:runtime.output_dir}/checkpoints  # Model checkpoints in output directory

# Experiment tracking
experiment:
  name: null  # Will be set automatically
  tags: []
  notes: ""

# Hydra configuration
hydra:
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
  job_logging:
    handlers:
      file:
        filename: ${hydra:runtime.output_dir}/train.log
